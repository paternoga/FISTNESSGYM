@page "/"
@using FISTNESSGYM.Components.Widgets
@using FISTNESSGYM.Models.database
@using FISTNESSGYM.Services
@using System.Security.Claims
@inject ISubscriptionService SubscriptionService
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject AuthorizationService AuthorizationService

@attribute [Authorize]
<PageTitle>STRONA G£ÓWNA</PageTitle>



@if (AuthorizationService.IsUser)
{
    <RadzenRow>
        <RadzenColumn Size="9">
            <RadzenRow>
                <RadzenColumn Size="4">
                    <SubscriptionStatus />
                </RadzenColumn>

                <RadzenColumn Size="4">
                    <Weather />
                </RadzenColumn>

                <RadzenColumn Size="4">
                    <GymOccupancy />
                </RadzenColumn>
            </RadzenRow>

            <Progress />

        </RadzenColumn>

        <RadzenColumn Size="3">
            <HeartRate />
        </RadzenColumn>
    </RadzenRow>
}

@if (AuthorizationService.IsClient)
{
    <RadzenRow>
        <RadzenColumn Size="9">
            <RadzenRow>
                <RadzenColumn Size="4">
                    <SubscriptionStatus />
                </RadzenColumn>

                <RadzenColumn Size="4">
                    <Weather />
                </RadzenColumn>

                <RadzenColumn Size="4">
                    <GymOccupancy />
                </RadzenColumn>
            </RadzenRow>

            <Progress />

        </RadzenColumn>

        <RadzenColumn Size="3">
            <HeartRate />
        </RadzenColumn>
    </RadzenRow>
}

@if (AuthorizationService.IsWorker)
{
    <RadzenRow>
        <RadzenColumn Size="3">
            <GymOccupancy />
        </RadzenColumn>

        <RadzenColumn Size="3">
            <Weather />
        </RadzenColumn>

        <RadzenColumn Size="3">
            <p>widget ostatniej osoby zalogowanej?</p>
        </RadzenColumn>

        <RadzenColumn Size="3">
            <p>widget sprzedanych dzisiaj  przedmiotow</p>
        </RadzenColumn>
    </RadzenRow>
}

@if (AuthorizationService.IsTrainer)
{
    <RadzenRow>

        <RadzenColumn Size="12">
            <UpcomingEvents />
        </RadzenColumn>

    </RadzenRow>
}

@if (AuthorizationService.IsAdmin)
{
    <RadzenRow>
        <RadzenColumn Size="12">
            <GymUsersClients/>
        </RadzenColumn>
    </RadzenRow>
}

@code {
    private string userId;

}